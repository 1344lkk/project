<!DOCTYPE html><#import "/lib/common.html" as common>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>修改密码</title>

<@common.css />
<link rel="stylesheet" type="text/css" href="/res/student/common.css">
<link rel="stylesheet" type="text/css" href="/res/student/commo.css">
</head>
<style type="text/css">
	#main{
		padding-top:10px;
	}
	#name{
		width: 60%;
	}
	#newPassword{
		width: 60%;
	}
	#lng{
		width: 60%;
	}
	.top{
		height:10px;
	}
</style>
<body>

<@common.topbar />
<div class="top"></div>
<div class="container banner-container">
    <div class="banner">
        <div class="banner-left">
            <div id="avatarimg" class="student-icon"><#if user.user.avatar??><img src="${user.user.avatar}"/><#else><img src="/res/student/images/student_1.jpg"/></#if></div>
        </div>
        <div class="banner-right">
            <h3 class="student-name">${user.user.truename!''}</h3>
            <div class="student-school">${user.clazz.schoolName!''}(${user.clazz.name!''})</div>
            <div class="student-note"><i class="fa fa-quote-left"></i> ${user.user.sign!'编辑签名'} <i class="fa fa-quote-right"></i> 
               <!-- <span id="edit" class="glyphicon glyphicon-pencil " title="点击更换签名" aria-hidden="true" onclick="editsign()" style="color:red;cursor:pointer;"></span> -->
            </div>
        </div>
    </div>
     <div class="menu">
        <ul>
            <li ><a href="/student/${user.user.id}">我的主页</a></li>
            <li ><a href="/student/${user.user.id}/learning">我的学习</a></li>
            <li ><a href="/student/${user.user.id}/work">我的成果</a></li>
        </ul>
    </div>
     <div id="main" class=" col-sm-12 " >
     <div class="panel panel-default">
       <div class="panel-body"> 
		    <form id="changePassword_form" class="form-horizontal main-form"  role="form">
				<div class="form-group">
				    <label for="name" class="col-sm-2 control-label">旧密码</label>
				    <div class="col-sm-10">
				        <input id="name" name="oldPassword"  placeholder="必填" type="password" class="form-control main-form-input checkPassword" required>
				    </div>
				</div>
				<div class="form-group">
				    <label for="code" class="col-sm-2 control-label">新密码</label>
				    <div class="col-sm-10">
				        <input id="newPassword" name="newPassword"  placeholder="限制输入数字、字母、下划线，6-20长度" type="password" class="form-control main-form-input checkPassword" required autofocus >
				    </div>
				</div>
				<div class="form-group">
				    <label for="code" class="col-sm-2 control-label">确认新密码</label>
				    <div class="col-sm-10">
				        <input id="lng" name="newPassword2"  placeholder="限制输入数字、字母、下划线，6-20长度" type="password" class="form-control main-form-input checkPassword" required autofocus >
				        <span id="PasswordMessage" style="color:red;"></span>  
				    </div>
				</div> 
			</form>
		   <div class="form-group">
	            <div class="col-sm-offset-2 col-sm-10">
	                <button id="button" class="btn btn-success" onclick="userSubmit()">提 交</button>
	            </div>
	      </div>
      </div>
    </div>
</div>
</div>
   
</div>
<!-- main -->

<@common.footer />

<@common.js />
<script src="/lib/jquery/1.11.3/jquery.validate.js"></script>
<script src="../../lib/jquery/1.11.3/messages_zh.js"></script>
<script type="text/javascript">

	function userSubmit(){
		var validators = $('#changePassword_form').validate();
		
		 if (!validators.form()) {			 
			 return;			
		 }else{
		 $.ajax({
			 type:'POST',
			 url:"/auth/member/Password",
			 data:$('#changePassword_form').serialize(),
			 success:function(result){
				 $('#PasswordMessage').html(result.message);
			 }
		 });
	   }
	}


</script>

</body>
</html>